; IR code
; PUSH
; JSR FUNC_id_main_L
; HALT
; LABEL FUNC_id_main_L
; LINK 1
; STOREI 0 !T1
; STOREI !T1 i
; STOREI 0 !T2
; STOREI !T2 a
; STOREI 0 !T3
; STOREI !T3 b
; LABEL label1
; STOREF 10 !T4
; EQ i !T4 label2
; READI p
; STOREF 10 !T5
; LE p !T5 label3
; STOREI 1 !T6
; ADDI a !T6 !T7
; STOREI !T7 a
; JUMP label4
; LABEL label3
; STOREI 1 !T8
; ADDI b !T8 !T9
; STOREI !T9 b
; LABEL label4
; STOREI 1 !T10
; ADDI i !T10 !T11
; STOREI !T11 i
; JUMP label1
; LABEL label2
; WRITEI a
; WRITEI b
; UNLINK
; RET
var a
var b
var i
var p
push
jsr FUNC_id_main_L
sys halt
label FUNC_id_main_L
link 13
;0 $-1 false false
move 0 $-1
;$-1 i false true
move $-1 r0
move r0 i
;0 $-3 false false
move 0 $-3
;$-3 a false true
move $-3 r0
move r0 a
;0 $-5 false false
move 0 $-5
;$-5 b false true
move $-5 r0
move r0 b
label label1
;10 $-7 false false
move 10 $-7
; handled?
move i r0
; handled2?
move $-7 r1
cmpi r0 r1
jeq label2
sys readi p
;10 $-8 false false
move 10 $-8
; handled?
move p r0
; handled2?
move $-8 r1
cmpi r0 r1
jle label3
;1 $-9 false false
move 1 $-9
; handled?
move a r0
; handled2?
move $-9 r1
addi r0 r1
move r1 $-10 ; + STORE_HANDLED
;$-10 a false true
move $-10 r0
move r0 a
jmp label4
label label3
;1 $-12 false false
move 1 $-12
; handled?
move b r0
; handled2?
move $-12 r1
addi r0 r1
move r1 $-13 ; + STORE_HANDLED
;$-13 b false true
move $-13 r0
move r0 b
label label4
;1 $-15 false false
move 1 $-15
; handled?
move i r0
; handled2?
move $-15 r1
addi r0 r1
move r1 $-16 ; + STORE_HANDLED
;$-16 i false true
move $-16 r0
move r0 i
jmp label1
label label2
sys writei a
sys writei b
unlnk
ret
