;IR code
;STOREI 0 $T1
;STOREI $T1 enough
;LABEL label1
[label1]
[label1, label1]
;STOREI 1 $T2
[label1, label1, label2]
;EQ enough $T2 label2
;STOREF 0.0 $T3
[label1, label1, label2, label3]
;LE diff $T3 label3
[label1, label1, label2, label3, label4]
[label1, label1, label2, label3, label4, label5]
;GE diff tolerance label5
[label1, label1, label2, label3, label4, label5, label6]
[label1, label1, label2, label3, label4, label5]
[label1, label1, label2, label3, label4]
;JUMP label6
;LABEL label5
;LABEL label6
[label1, label1, label2, label3]
[label1, label1, label2]
;JUMP label4
;LABEL label3
[label1, label1, label2, label4]
;STOREF 0.0 $T4
;SUBF $T4 tolerance $T5
[label1, label1, label2, label4, label7]
;LE diff $T5 label7
[label1, label1, label2, label4, label7, label8]
[label1, label1, label2, label4, label7]
[label1, label1, label2, label4]
;JUMP label8
;LABEL label7
;LABEL label8
[label1, label1, label2]
[label1, label1]
;JUMP label4
;LABEL label2
[label1, label1, label4]
[label1, label1]
[label1]
;JUMP label4
;LABEL label1
;LABEL label4
[]
;JUMP label1
;LABEL label1
;WRITEI count
;WRITES eol
;RET
;tiny code
var count
var enough
var newapprox
var approx
var num
var tolerance
var diff
str eol "\n"
str space " "
move 0 r0
move r0 enough
move 0.0 r3
move r3 r4
subr tolerance r4
sys writei count
sys writes eol
sys halt
