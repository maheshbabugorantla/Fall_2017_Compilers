; IR code
; PUSH
; JSR FUNC_id_main_L
; HALT
; LABEL FUNC_id_F_L
; LINK 3
; STOREI 2 !T1
;LE $2 !T1 label1
; PUSH (return value)
;STOREI 1 !T2
;SUBI $2 !T2 !T3
; PUSH !T3
; JSR FUNC_id_F_L
; POP
; POP !T4
; STOREI !T4 $-1
; PUSH (return value)
;STOREI 2 !T5
;SUBI $2 !T5 !T6
; PUSH !T6
; JSR FUNC_id_F_L
; POP
; POP !T7
; STOREI !T7 $-2
;ADDI $-1 $-2 !T8
; STOREI !T8 $3
; UNLINK
; RET
;JUMP label2
;LABEL label1
; STOREI 0 !T9
;NE $2 !T9 label3
;STOREI 0 !T10
; STOREI !T10 $3
; UNLINK
; RET
;JUMP label4
;LABEL label3
; STOREI 1 !T11
;NE $2 !T11 label5
;STOREI 1 !T12
; STOREI !T12 $3
; UNLINK
; RET
;JUMP label6
;LABEL label5
;STOREI 1 !T13
; STOREI !T13 $3
; UNLINK
; RET
;LABEL label6
;LABEL label4
;LABEL label2
; LABEL FUNC_id_main_L
; LINK 4
;WRITES input
; READI $-2
; STOREI 0 !T14
; STOREI !T14 $-1
;LABEL label7
; STOREI $-2 !T15
;EQ $-1 !T15 label8
; PUSH (return value)
; PUSH $-1
; JSR FUNC_id_F_L
; POP
; POP !T16
; STOREI !T16 $-3
; WRITEI $-1
;WRITES space
; WRITEI $-3
;WRITES eol
;STOREI 1 !T17
;ADDI $-1 !T17 !T18
; STOREI !T18 $-1
;JUMP label7
;LABEL label8
;STOREI 0 !T19
; STOREI !T19 $6
; UNLINK
; RET
;tiny code
str input "Please input an integer number: "
str space " "
str eol "\n"
push
jsr FUNC_id_main_L
sys halt
label FUNC_id_F_L
link 3
move 2 r0
cmpi $2 r0
jle label1
push
move 1 r1
move $2 r2
subi r1 r2
push r2
jsr FUNC_id_F_L
pop
pop r3
move r3 $-1
push
move 2 r4
move $2 r5
subi r4 r5
push r5
jsr FUNC_id_F_L
pop
pop r6
move r6 $-2
move $-1 r7
addi $-2 r7
move r7  $3
unlnk
ret
jmp label2
label label1
move 0 r8
cmpi $2 r8
jne label3
move 0 r9
move r9 $3
unlnk
ret
jmp label4
label label3
move 1 r10
cmpi $2 r10
jne label5
move 1 r11
move r11 $3
unlnk
ret
jmp label6
label label5
move 1 r12
move r12 $3
unlnk
ret
label label6
label label4
label label2
label FUNC_id_main_L
link 4
sys writes input
sys readi $-2
move 0 r13
move r13 $-1
label label7
move $-2 r14
cmpi $-1 r14
jeq label8
push
push $-1
jsr FUNC_id_F_L
pop
pop r15
move r15 $-3
sys writei $-1
sys writes space
sys writei $-3
sys writes eol
move 1 r16
move $-1 r17
addi r16 r17
move r17 $-1
jmp label7
label label8
move 0 r18
move r18 $6
unlnk
ret
